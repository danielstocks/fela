
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <title>5.2. Testing Fela Components Â· Fela</title>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.1.0">
        <meta name="author" content="Robin Frischmann <robin@weser.io>">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="DisplayNameComponents.html" />
    
    
    <link rel="prev" href="ResponsiveComponents.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Read Me
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../Introduction.html">
            
                <a href="../Introduction.html">
            
                    
                    1. Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../introduction/Motivation.html">
            
                <a href="../introduction/Motivation.html">
            
                    
                    1.1. Motivation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../introduction/Principles.html">
            
                <a href="../introduction/Principles.html">
            
                    
                    1.2. Principles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../introduction/Benefits.html">
            
                <a href="../introduction/Benefits.html">
            
                    
                    1.3. Benefits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../introduction/Caveats.html">
            
                <a href="../introduction/Caveats.html">
            
                    
                    1.4. Caveats
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../introduction/Ecosystem.html">
            
                <a href="../introduction/Ecosystem.html">
            
                    
                    1.5. Ecosystem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../introduction/Examples.html">
            
                <a href="../introduction/Examples.html">
            
                    
                    1.6. Examples
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../Basics.html">
            
                <a href="../Basics.html">
            
                    
                    2. Basics
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../basics/Rules.html">
            
                <a href="../basics/Rules.html">
            
                    
                    2.1. Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../basics/Keyframes.html">
            
                <a href="../basics/Keyframes.html">
            
                    
                    2.2. Keyframes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../basics/Fonts.html">
            
                <a href="../basics/Fonts.html">
            
                    
                    2.3. Fonts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../basics/Renderer.html">
            
                <a href="../basics/Renderer.html">
            
                    
                    2.4. Renderer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../Advanced.html">
            
                <a href="../Advanced.html">
            
                    
                    3. Advanced
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../advanced/DOMRendering.html">
            
                <a href="../advanced/DOMRendering.html">
            
                    
                    3.1. DOM Rendering
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../advanced/ServerRendering.html">
            
                <a href="../advanced/ServerRendering.html">
            
                    
                    3.2. Server Rendering
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../advanced/Plugins.html">
            
                <a href="../advanced/Plugins.html">
            
                    
                    3.3. Plugins
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../advanced/RendererConfiguration.html">
            
                <a href="../advanced/RendererConfiguration.html">
            
                    
                    3.4. Renderer Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../advanced/StaticStyle.html">
            
                <a href="../advanced/StaticStyle.html">
            
                    
                    3.5. Global & Third-Party Styles
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../advanced/CombinedRules.html">
            
                <a href="../advanced/CombinedRules.html">
            
                    
                    3.6. Combined Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../advanced/Enhancers.html">
            
                <a href="../advanced/Enhancers.html">
            
                    
                    3.7. Enhancers
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../UsageGuides.html">
            
                <a href="../UsageGuides.html">
            
                    
                    4. Usage Guides
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../guides/UsageWithReact.html">
            
                <a href="../guides/UsageWithReact.html">
            
                    
                    4.1. Usage with React
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../guides/UsageWithReactNative.html">
            
                <a href="../guides/UsageWithReactNative.html">
            
                    
                    4.2. Usage with React Native
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../guides/UsageWithPreact.html">
            
                <a href="../guides/UsageWithPreact.html">
            
                    
                    4.3. Usage with Preact
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../guides/UsageWithInferno.html">
            
                <a href="../guides/UsageWithInferno.html">
            
                    
                    4.4. Usage with Inferno
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../guides/UsageWithReasonML.html">
            
                <a href="../guides/UsageWithReasonML.html">
            
                    
                    4.5. Usage with ReasonML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../guides/UsageWithAngular2.html">
            
                <a href="../guides/UsageWithAngular2.html">
            
                    
                    4.6. Usage with Angular 2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../guides/UsageWithCycle.html">
            
                <a href="../guides/UsageWithCycle.html">
            
                    
                    4.7. Usage with Cycle
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../Recipes.html">
            
                <a href="../Recipes.html">
            
                    
                    5. Recipes
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="ResponsiveComponents.html">
            
                <a href="ResponsiveComponents.html">
            
                    
                    5.1. Responsive Components
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.6.2" data-path="TestingFelaComponents.html">
            
                <a href="TestingFelaComponents.html">
            
                    
                    5.2. Testing Fela Components
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="DisplayNameComponents.html">
            
                <a href="DisplayNameComponents.html">
            
                    
                    5.3. Explicit Component displayName
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="MonolithicClassNames.html">
            
                <a href="MonolithicClassNames.html">
            
                    
                    5.4. Monolithic Class Names
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="UsingRefWithReactComponent.html">
            
                <a href="UsingRefWithReactComponent.html">
            
                    
                    5.5. Using ref with React Component
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../API.html">
            
                <a href="../API.html">
            
                    
                    6. API Reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" >
            
                <span>
            
                    
                    6.1. fela
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1.1" data-path="../api/fela/createRenderer.html">
            
                <a href="../api/fela/createRenderer.html">
            
                    
                    6.1.1. createRenderer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.2" data-path="../api/fela/Renderer.html">
            
                <a href="../api/fela/Renderer.html">
            
                    
                    6.1.2. Renderer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.3" data-path="../api/fela/combineRules.html">
            
                <a href="../api/fela/combineRules.html">
            
                    
                    6.1.3. combineRules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.1.4" data-path="../api/fela/enhance.html">
            
                <a href="../api/fela/enhance.html">
            
                    
                    6.1.4. enhance
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.2" >
            
                <span>
            
                    
                    6.2. fela-dom
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.2.1" data-path="../api/fela-dom/render.html">
            
                <a href="../api/fela-dom/render.html">
            
                    
                    6.2.1. render
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.2" data-path="../api/fela-dom/rehydrate.html">
            
                <a href="../api/fela-dom/rehydrate.html">
            
                    
                    6.2.2. rehydrate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.3" data-path="../api/fela-dom/renderToMarkup.html">
            
                <a href="../api/fela-dom/renderToMarkup.html">
            
                    
                    6.2.3. renderToMarkup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2.4" data-path="../api/fela-dom/renderToSheetList.html">
            
                <a href="../api/fela-dom/renderToSheetList.html">
            
                    
                    6.2.4. renderToSheetList
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.3" >
            
                <span>
            
                    
                    6.3. fela-native
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.3.1" data-path="../api/fela-native/createRenderer.html">
            
                <a href="../api/fela-native/createRenderer.html">
            
                    
                    6.3.1. createRenderer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3.2" data-path="../api/fela-native/Renderer.html">
            
                <a href="../api/fela-native/Renderer.html">
            
                    
                    6.3.2. Renderer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.4" >
            
                <span>
            
                    
                    6.4. react/preact/inferno
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.4.1" data-path="../api/bindings/connect.html">
            
                <a href="../api/bindings/connect.html">
            
                    
                    6.4.1. connect
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.2" data-path="../api/bindings/createComponent.html">
            
                <a href="../api/bindings/createComponent.html">
            
                    
                    6.4.2. createComponent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.3" data-path="../api/bindings/createComponentWithProxy.html">
            
                <a href="../api/bindings/createComponentWithProxy.html">
            
                    
                    6.4.3. createComponentWithProxy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.4" data-path="../api/bindings/fe.html">
            
                <a href="../api/bindings/fe.html">
            
                    
                    6.4.4. fe
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.5" data-path="../api/bindings/FelaComponent.html">
            
                <a href="../api/bindings/FelaComponent.html">
            
                    
                    6.4.5. FelaComponent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.6" data-path="../api/bindings/FelaTheme.html">
            
                <a href="../api/bindings/FelaTheme.html">
            
                    
                    6.4.6. FelaTheme
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.7" data-path="../api/bindings/FelaRenderer.html">
            
                <a href="../api/bindings/FelaRenderer.html">
            
                    
                    6.4.7. FelaRenderer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.8" data-path="../api/bindings/RendererProvider.html">
            
                <a href="../api/bindings/RendererProvider.html">
            
                    
                    6.4.8. RendererProvider
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.9" data-path="../api/bindings/ThemeProvider.html">
            
                <a href="../api/bindings/ThemeProvider.html">
            
                    
                    6.4.9. ThemeProvider
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.10" data-path="../api/bindings/RendererContext.html">
            
                <a href="../api/bindings/RendererContext.html">
            
                    
                    6.4.10. RendererContext
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.11" data-path="../api/bindings/ThemeContext.html">
            
                <a href="../api/bindings/ThemeContext.html">
            
                    
                    6.4.11. ThemeContext
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.12" data-path="../api/bindings/useFela.html">
            
                <a href="../api/bindings/useFela.html">
            
                    
                    6.4.12. useFela
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4.13" data-path="../api/bindings/withTheme.html">
            
                <a href="../api/bindings/withTheme.html">
            
                    
                    6.4.13. withTheme
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.5" >
            
                <span>
            
                    
                    6.5. jest + react/preact/inferno
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.5.1" data-path="../api/jest-bindings/createSnapshot.html">
            
                <a href="../api/jest-bindings/createSnapshot.html">
            
                    
                    6.5.1. createSnapshot
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../MIGRATION.html">
            
                <a href="../../MIGRATION.html">
            
                    
                    7. Migration Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../CHANGELOG.html">
            
                <a href="../../CHANGELOG.html">
            
                    
                    8. Changelog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../FAQ.html">
            
                <a href="../FAQ.html">
            
                    
                    9. FAQ
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../Feedback.html">
            
                <a href="../Feedback.html">
            
                    
                    10. Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../Thanks.html">
            
                <a href="../Thanks.html">
            
                    
                    11. Thanks
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >5.2. Testing Fela Components</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="testing-fela-components">Testing Fela Components</h1>
<blockquote>
<p><strong>Caution</strong>: This documentation is kinda out-dated and more complex than it needs to be. It will be updated soon. For now, please refer to <a href="../api/jest-bindings/createSnapshot.html">createSnapshot</a> for testing with Jest.</p>
</blockquote>
<p>There is no required library for testing Fela components. Since Fela is <a href="../introduction/Benefits.html">framework-agnostic</a>, you may use any javascript testing library to test your components. Fela&apos;s source is already <a href="https://codeclimate.com/github/robinweser/fela/coverage" _target="blank">fully tested</a>, so your tests should only confirm that Fela&apos;s styles are interacting correctly with the components.</p>
<h2 id="approach">Approach</h2>
<h4 id="testing-the-renderer">Testing the Renderer</h4>
<p>The <a href="../basics/Renderer.html"><code>renderer</code></a> is only responsible for <em>inserting the styles into the application</em> and <em>providing your components a reference to the styles</em>. Therefore, our tests should ensure these two responsibilities work correctly with our components.</p>
<h4 id="testing-rules">Testing Rules</h4>
<p><a href="../basics/Rules.html">Rules are just pure functions</a>. Eric Elliot, a respected Javascript instructor in the industry, <a href="https://medium.com/javascript-scene/master-the-javascript-interview-what-is-a-pure-function-d1c076bec976" _target="blank">defines pure functions for us</a>.</p>
<blockquote>
<p>A pure function is a function which:</p>
<ul>
<li>Given the same input, will always return the same output.</li>
<li>Produces no side effects.</li>
<li>Relies on no external mutable state.</li>
</ul>
</blockquote>
<p>Since our rules will follow this definition, our tests can simply ensure our rules <em>output the correct styles for every input.</em></p>
<h2 id="implementation">Implementation</h2>
<p>We will use <a href="https://facebook.github.io/jest/" _target="blank">Jest</a> in the following examples, but since any testing library can be used to test Fela components, feel free to apply the approaches above to the library that best suites you. Please be familiar with <a href="https://facebook.github.io/jest/docs/en/getting-started.html#content" _target="blank">how to setup Jest</a> and <a href="https://facebook.github.io/jest/docs/en/snapshot-testing.html#content" _target="blank">snapshot testing</a> to find the examples useful.</p>
<h3 id="a-basic-test">A Basic Test</h3>
<p>Here is what a basic test for a Fela React component looks like.</p>
<pre class="language-"><code class="lang-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> renderer <span class="token keyword">from</span> <span class="token string">&apos;react-test-renderer&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRenderer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;fela&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider<span class="token punctuation">,</span> createComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react-fela&apos;</span>

<span class="token keyword">const</span> <span class="token function-variable function">boxRules</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> size <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  width<span class="token punctuation">:</span> size <span class="token operator">+</span> <span class="token string">&apos;px&apos;</span><span class="token punctuation">,</span>
  height<span class="token punctuation">:</span> size <span class="token operator">+</span> <span class="token string">&apos;px&apos;</span><span class="token punctuation">,</span>
  backgroundColor<span class="token punctuation">:</span> <span class="token string">&apos;red&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> Box <span class="token operator">=</span> <span class="token function">createComponent</span><span class="token punctuation">(</span>boxRules<span class="token punctuation">)</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&apos;Box&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&apos;should render component&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> felaRenderer <span class="token operator">=</span> <span class="token function">createRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> component <span class="token operator">=</span> renderer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Provider renderer<span class="token operator">=</span><span class="token punctuation">{</span>felaRenderer<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Box<span class="token operator">&gt;</span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>Box<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>component<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Our <code>expect</code> case creates a JSON snapshot of the component with <a href="https://github.com/facebook/react/tree/master/packages/react-test-renderer" _target="blank">react-test-renderer</a> and compares it to any previous snapshots for changes (Jest feature).</p>
<pre class="language-"><code>exports[`Box should render component 1`] = `
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
  <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>a b c<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span>{undefined}</span>
  <span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation">=</span>{undefined}</span>
<span class="token punctuation">&gt;</span></span>
  hello
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
`;
</code></pre><p>This is not great. There is a lot of boilerplate to simply test if the component renders. Also, since Fela needs the <code>renderer</code> context to create the styles, we must wrap every component in Fela&apos;s <a href="../api/bindings/Provider.md">Provider</a>. Even after this setup, we&apos;re really not testing much about the style of the component. It would be great to get rid of the boilerplate and track changes to the styles themselves (not just the classNames).</p>
<h3 id="improving-our-test">Improving Our Test</h3>
<p>From examining a basic test for Fela components, we want to focus on reducing boilerplate and improving our test coverage. To achieve this, let&apos;s create some helper functions that can be imported into any of our tests.</p>
<h4 id="simplifying-the-provider">Simplifying The Provider</h4>
<p>Fela components need a <code>renderer</code> and an optional <code>theme</code> available within their React&apos;s <a href="https://facebook.github.io/react/docs/context.html" _target="blank">context</a> in order to render. Since fela supplies a <a href="../api/bindings/Provider.md">Provider</a> and optional <a href="../api/bindings/ThemeProvider.html">ThemeProvider</a> to supplies these values, we must wrap all of our tested components with them. To keep our code DRY, let us create a simple helper function that does this for us.</p>
<pre class="language-"><code class="lang-javascript"><span class="token comment">// test-helpers/felaSnapshot.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span>
<span class="token keyword">import</span> renderer <span class="token keyword">from</span> <span class="token string">&apos;react-test-renderer&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRenderer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;fela&apos;</span>

<span class="token keyword">function</span> <span class="token function">felaSnapshot</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> felaRenderer <span class="token operator">=</span> <span class="token function">createRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> renderer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Provider renderer<span class="token operator">=</span><span class="token punctuation">{</span>felaRenderer<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>component<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> felaSnapshot
</code></pre>
<p>Now, instead of declaring this function in every test, we can import it from one central location. Let&apos;s take a look at our basic test utilizing this function.</p>
<pre class="language-"><code class="lang-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react-fela&apos;</span>
<span class="token keyword">import</span> felaSnapshot <span class="token keyword">from</span> <span class="token string">&apos;./test-helpers/felaSnapshot.js&apos;</span>

<span class="token keyword">const</span> <span class="token function-variable function">boxRules</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> size <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  width<span class="token punctuation">:</span> size <span class="token operator">+</span> <span class="token string">&apos;px&apos;</span><span class="token punctuation">,</span>
  height<span class="token punctuation">:</span> size <span class="token operator">+</span> <span class="token string">&apos;px&apos;</span><span class="token punctuation">,</span>
  backgroundColor<span class="token punctuation">:</span> <span class="token string">&apos;red&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> Box <span class="token operator">=</span> <span class="token function">createComponent</span><span class="token punctuation">(</span>boxRules<span class="token punctuation">)</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&apos;Box&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&apos;should render component&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> snapshot <span class="token operator">=</span> <span class="token function">felaSnapshot</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Box<span class="token operator">&gt;</span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>Box<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>snapshot<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Much cleaner!</p>
<h4 id="better-test-coverage">Better Test Coverage</h4>
<p>We&apos;ve got a test helper to help create component snapshots for our tests, so let us focus on test coverage now. In our <code>Box</code> component from the basic example, passing a <code>size</code> property would change the size of the box. That seems like an important thing to test, so let us create a test for that now.</p>
<pre class="language-"><code class="lang-javascript"><span class="token operator">...</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&apos;should change box size when size prop is passed&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> snapshot <span class="token operator">=</span> <span class="token function">felaSnapshot</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Box size<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">50</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>Box<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>snapshot<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">...</span>
</code></pre>
<p>Now look at the snapshot output.</p>
<pre class="language-"><code>exports[`Box should change box size when size prop is passed 1`] = `
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
  <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>a b c<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  hello
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
`;
</code></pre><p>The snapshot does not indicate anything has actually changed. Because the <code>classNames</code> just reference the styles that fela generates, we should output those styles to our snapshot as well. Since this output is just a CSS string, we can save it alongside our component snapshot. For this, we are going to need to extend our helper function.</p>
<pre class="language-"><code class="lang-javascript"><span class="token comment">// test-helpers/felaSnapshot.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span>
<span class="token keyword">import</span> renderer <span class="token keyword">from</span> <span class="token string">&apos;react-test-renderer&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRenderer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;fela&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> renderToString <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;fela-tools&apos;</span>

<span class="token comment">// splits the css string into a more readable format (credit: este&apos;s source)</span>
<span class="token keyword">const</span> <span class="token function-variable function">prettifyFelaString</span> <span class="token operator">=</span> <span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\.[a-z]+/g</span><span class="token punctuation">,</span> <span class="token string">&apos;\n    $&amp;&apos;</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">felaSnapshot</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> felaRenderer <span class="token operator">=</span> <span class="token function">createRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token comment">// output an object with both the component snapshot and raw styles</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    component<span class="token punctuation">:</span> renderer
      <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Provider renderer<span class="token operator">=</span><span class="token punctuation">{</span>felaRenderer<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>component<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    styles<span class="token punctuation">:</span> <span class="token function">prettifyFelaString</span><span class="token punctuation">(</span><span class="token function">renderToString</span><span class="token punctuation">(</span>felaRenderer<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> felaSnapshot
</code></pre>
<p><code>felaSnapshot</code> now snapshots both the React component output and the styles generated by Fela. If we look at our test snapshots now, we can see the difference when the <code>size</code> prop changes.</p>
<pre class="language-"><code>exports[`Box should change box size when size prop is passed 1`] = `
Object {
  &quot;component&quot;: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
    <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>a b c<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
    hello
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>,
  &quot;styles&quot;: &quot;
    .a{width:50px}
    .b{height:50px}
    .c{background-color:red}&quot;,
}
`;

exports[`Box should render component 1`] = `
Object {
  &quot;component&quot;: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
    <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>a b c<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
    hello
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>,
  &quot;styles&quot;: &quot;
    .a{width:10px}
    .b{height:10px}
    .c{background-color:red}&quot;,
}
`;
</code></pre><h3 id="wrap-up">Wrap Up</h3>
<p>These helper functions make testing the React code much easier. Your code-base may obviously require further functionality, but this provides a solid foundation to build off of.</p>
<p>Here is the full example.</p>
<pre class="language-"><code class="lang-javascript"><span class="token comment">// Box.test.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span>
<span class="token keyword">import</span> renderer <span class="token keyword">from</span> <span class="token string">&apos;react-test-renderer&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRenderer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;fela&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> renderToString <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;fela-tools&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider<span class="token punctuation">,</span> createComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;react-fela&apos;</span>

<span class="token keyword">const</span> <span class="token function-variable function">boxRules</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> size <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  width<span class="token punctuation">:</span> size <span class="token operator">+</span> <span class="token string">&apos;px&apos;</span><span class="token punctuation">,</span>
  height<span class="token punctuation">:</span> size <span class="token operator">+</span> <span class="token string">&apos;px&apos;</span><span class="token punctuation">,</span>
  backgroundColor<span class="token punctuation">:</span> <span class="token string">&apos;red&apos;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> Box <span class="token operator">=</span> <span class="token function">createComponent</span><span class="token punctuation">(</span>boxRules<span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">prettifyFelaString</span> <span class="token operator">=</span> str <span class="token operator">=&gt;</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\.[a-z]+/g</span><span class="token punctuation">,</span> <span class="token string">&apos;\n    $&amp;&apos;</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">felaSnapshot</span><span class="token punctuation">(</span>component<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> felaRenderer <span class="token operator">=</span> <span class="token function">createRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    component<span class="token punctuation">:</span> renderer
      <span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Provider renderer<span class="token operator">=</span><span class="token punctuation">{</span>felaRenderer<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>component<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    styles<span class="token punctuation">:</span> <span class="token function">prettifyFelaString</span><span class="token punctuation">(</span><span class="token function">renderToString</span><span class="token punctuation">(</span>felaRenderer<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&apos;Box&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&apos;should render component&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> snapshot <span class="token operator">=</span> <span class="token function">felaSnapshot</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Box<span class="token operator">&gt;</span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>Box<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>snapshot<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&apos;should change box size when size prop is passed&apos;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> snapshot <span class="token operator">=</span> <span class="token function">felaSnapshot</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Box size<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">50</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>Box<span class="token operator">&gt;</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>snapshot<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toMatchSnapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>You may also consider <a href="http://airbnb.io/enzyme/" _target="blank">Enzyme</a> as your React renderer (instead of <a href="https://github.com/facebook/react/tree/master/packages/react-test-renderer" _target="blank">react-test-renderer</a>). They have a powerful API, and using <a href="https://github.com/adriantoine/enzyme-to-json" _target="blank">enzyme-to-json</a>, you can still utilize Jest&apos;s powerful snapshot testing. Their <code>shallow</code> and <code>mount</code> rendering also provides an API to explicitly pass your own context, so there is no more need for Fela&apos;s <a href="../api/bindings/Provider.md">Provider</a>. Here are some wrappers around these Enzyme functions to support Fela.</p>
<pre class="language-"><code class="lang-javascript"><span class="token comment">// test-helpers/felaShallow.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> shallow <span class="token keyword">as</span> enzymeShallow <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;enzyme&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRenderer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;fela&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> renderToString <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;fela-tools&apos;</span>
<span class="token keyword">import</span> toJson <span class="token keyword">from</span> <span class="token string">&apos;enzyme-to-json&apos;</span>

<span class="token keyword">const</span> <span class="token function-variable function">shallow</span> <span class="token operator">=</span> <span class="token punctuation">(</span>node<span class="token punctuation">,</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token function">createRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> component <span class="token operator">=</span> <span class="token function">enzymeShallow</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      renderer<span class="token punctuation">,</span>
      <span class="token comment">// theme,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>options
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  component<span class="token punctuation">.</span><span class="token function-variable function">snapshot</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">snapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      component<span class="token punctuation">:</span> <span class="token function">toJson</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// you should prettify this string</span>
      styles<span class="token punctuation">:</span> <span class="token function">renderToString</span><span class="token punctuation">(</span>renderer<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> component
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">shallow</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Box<span class="token operator">&gt;</span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>Box<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">snapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// Object {</span>
<span class="token comment">//   &quot;component&quot;: &lt;div</span>
<span class="token comment">//     className=&quot;a b c&quot;</span>
<span class="token comment">// &gt;</span>
<span class="token comment">//     hello</span>
<span class="token comment">// &lt;/div&gt;,</span>
<span class="token comment">//   &quot;styles&quot;: &quot;.a{width:10px}.b{height:10px}.c{background-color:red}&quot;,</span>
<span class="token comment">// }</span>
</code></pre>
<pre class="language-"><code class="lang-javascript"><span class="token comment">// test-helpers/felaMount.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&apos;react&apos;</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">&apos;prop-types&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> mount <span class="token keyword">as</span> enzymeMount <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;enzyme&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRenderer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;fela&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> renderToString <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;fela-tools&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createTheme <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;fela-bindings&apos;</span>
<span class="token keyword">import</span> toJson <span class="token keyword">from</span> <span class="token string">&apos;enzyme-to-json&apos;</span>
<span class="token keyword">import</span> myTheme <span class="token keyword">from</span> <span class="token string">&apos;./my-theme&apos;</span>


<span class="token keyword">const</span> <span class="token function-variable function">mount</span> <span class="token operator">=</span> <span class="token punctuation">(</span>node<span class="token punctuation">,</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token function">createRenderer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> component <span class="token operator">=</span> <span class="token function">enzymeMount</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    childContextTypes<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      renderer<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>object<span class="token punctuation">,</span>
      _FELA_THEME_<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>object
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    context<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      renderer<span class="token punctuation">,</span>
      _FELA_THEME_<span class="token punctuation">:</span> <span class="token function">createTheme</span><span class="token punctuation">(</span>myTheme<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>options
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  component<span class="token punctuation">.</span><span class="token function-variable function">snapshot</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">snapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      component<span class="token punctuation">:</span> <span class="token function">toJson</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// you should prettify this string</span>
      styles<span class="token punctuation">:</span> <span class="token function">renderToString</span><span class="token punctuation">(</span>renderer<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> component
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Box<span class="token operator">&gt;</span>hello<span class="token operator">&lt;</span><span class="token operator">/</span>Box<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">snapshot</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// Object {</span>
<span class="token comment">//   &quot;component&quot;: &lt;boxRules&gt;</span>
<span class="token comment">//     &lt;div</span>
<span class="token comment">//         className=&quot;a b c&quot;</span>
<span class="token comment">//     &gt;</span>
<span class="token comment">//         hello</span>
<span class="token comment">//     &lt;/div&gt;</span>
<span class="token comment">// &lt;/boxRules&gt;,</span>
<span class="token comment">//   &quot;styles&quot;: &quot;.a{width:10px}.b{height:10px}.c{background-color:red}&quot;,</span>
<span class="token comment">// }</span>
</code></pre>
<p>Happy testing!</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ResponsiveComponents.html" class="navigation navigation-prev " aria-label="Previous page: 5.1. Responsive Components">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="DisplayNameComponents.html" class="navigation navigation-next " aria-label="Next page: 5.3. Explicit Component displayName">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"5.2. Testing Fela Components","level":"1.6.2","depth":2,"next":{"title":"5.3. Explicit Component displayName","level":"1.6.3","depth":2,"path":"docs/recipes/DisplayNameComponents.md","ref":"docs/recipes/DisplayNameComponents.md","articles":[]},"previous":{"title":"5.1. Responsive Components","level":"1.6.1","depth":2,"path":"docs/recipes/ResponsiveComponents.md","ref":"docs/recipes/ResponsiveComponents.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","prism","-highlight","github","anker-enable","advanced-emoji"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/robinweser/fela/"},"anker-enable":{},"search":{},"lunr":{"maxIndexSize":1000000},"fontsettings":{"theme":"white","family":"sans","size":2},"advanced-emoji":{"embedEmojis":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"base":"https://github.com/robinweser/fela/tree/master","label":"Edit This Page"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"Robin Frischmann <robin@weser.io>","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Fela","language":"en","gitbook":"3.1.0","description":"Official documentation for Fela"},"file":{"path":"docs/recipes/TestingFelaComponents.md","mtime":"2019-11-18T15:13:39.804Z","type":"markdown"},"gitbook":{"version":"3.1.0","time":"2019-11-22T13:06:37.054Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anker-enable/anker.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

